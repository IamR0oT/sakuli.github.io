
<!DOCTYPE html>
<html lang="en">

<head>
    
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-TMFSKHB');</script>
    
    
    <title>
        Sakuli End2End Testing and Monitoring | Interacting with the environment
    </title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="publisher" content="ConSol Consulting & Solutions Software GmbH">
    <meta name="copyright" content="ConSol Consulting & Solutions Software GmbH">
    <meta name="description" content="Behavior and performance validation of basically every application. Test like a real-world user. DOM-based and native UI Testing features cover every scenario. Send performance data to monitoring systems. The Pinnacle of Testing!">
    <meta name="keywords" content="End2End E2E End to End Monitoring UI Testing RPA Robot Process Automation Support Maintenance Container S2I Images Enterprise Packages">
    <meta name="page-topic" content="IT, Business, Software Quality">
    <meta name="page-type" content="Software Product">
    <meta name="audience" clang="en" content="all">
    <meta name="robots" content="index, follow">

    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="content-language" content="en">

    <meta name="DC.Publisher" content="ConSol Consulting & Solutions Software GmbH">
    <meta name="DC.Rights" content="ConSol Consulting & Solutions Software GmbH">
    <meta name="DC.Description" content="Behavior and performance validation of basically every application. Test like a real-world user. DOM-based and native UI Testing features cover every scenario. Send performance data to monitoring systems. The Pinnacle of Testing!">
    <meta name="DC.Language" content="en">
    
    <meta property="og:title" content="Sakuli End2End Testing and Monitoring | Interacting with the environment" />
    <meta property="og:description" content="Behavior and performance validation of basically every application. Test like a real-world user. DOM-based and native UI Testing features cover every scenario. Send performance data to monitoring systems. The Pinnacle of Testing!" />
    <meta property="og:image" content="https://sakuli.io/images/sakuli_hero.png" />
    <meta property="og:site_name" content="Sakuli End-to-End Testing and Monitoring" />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Sakuli E2E | Interacting with the environment" />
    <meta name="twitter:description" content="Behavior and performance validation of basically every application. Test like a real-world user. DOM-based and native UI Testing features cover every scenario. Send performance data to monitoring systems. The Pinnacle of Testing!" />
    <meta name="twitter:image" content="https://sakuli.io/images/sakuli_hero.png" />
    <meta name="twitter:site" content="@sakuli_e2e" />

    
    
    <link rel="stylesheet" href="https://sakuli.io/style.css" integrity="" />
    <link rel="stylesheet" href="/vue/index.css" />
    <link href="/fontawesome/css/all.min.css" rel="stylesheet">
    

    

    
    
    <script lang="text/javascript">
        var ua = window.navigator.userAgent;
        var version = ieVersion(ua);
        if (version && version >= 10 && version <= 11) {
            document.write('<script crossorigin="anonymous" src="https://polyfill.io/v3/polyfill.min.js?features=Object.assign%2CArray.from%2CPromise%2CString.prototype.startsWith"><\/script>');
            document.write('<link rel="stylesheet" href="https:\/\/sakuli.io\/ie.css" integrity="" />')
        }
        function ieVersion(uaString) {
            uaString = uaString || navigator.userAgent;
            var match = /\b(MSIE |Trident.*?rv:|Edge\/)(\d+)/.exec(uaString);
            if (match) return parseInt(match[2])
        }
    </script>
</head>

<body>
    
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TMFSKHB" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    
    <a href="https://www.github.com/sakuli/sakuli" target="_blank" rel="noopener" class="github-corner"
        aria-label="View source on GitHub">
        <svg width="70" height="70" viewBox="0 0 250 250"
            style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
            <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
            <path
                d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
                fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
            <path
                d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
                fill="currentColor" class="octo-body"></path>
        </svg></a>
    <style>
        .github-corner:hover .octo-arm {
            animation: octocat-wave 560ms ease-in-out
        }

        @keyframes octocat-wave {

            0%,
            100% {
                transform: rotate(0)
            }

            20%,
            60% {
                transform: rotate(-25deg)
            }

            40%,
            80% {
                transform: rotate(10deg)
            }
        }

        @media (max-width:500px) {
            .github-corner:hover .octo-arm {
                animation: none
            }

            .github-corner .octo-arm {
                animation: octocat-wave 560ms ease-in-out
            }
        }
    </style>

    <header class="navbar navbar-expand-lg sticky-top navbar-light bg-none" style="height: 100%;">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navBar" aria-controls="navBar"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <nav class="collapse navbar-collapse" id="navBar">
            <a class="navbar-brand flex-grow-1 d-none d-sm-block" href="/">
                <svg width="50px" height="50px" version="1.1" id="el_33VhVOlhh" xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 283 283"
enable-background="new 0 0 283.46 283.46" xml:space="preserve">
<style>
    @-webkit-keyframes kf_el_zLp-eZHf9H_an_08tqQJTbr {
        0% {
            -webkit-transform: translate(141.39999759197235px, 141.6250023841858px) rotate(0deg) translate(-141.39999759197235px, -141.6250023841858px);
            transform: translate(141.39999759197235px, 141.6250023841858px) rotate(0deg) translate(-141.39999759197235px, -141.6250023841858px);
        }

        33.33% {
            -webkit-transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
            transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
        }

        100% {
            -webkit-transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
            transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
        }
    }

    @keyframes kf_el_zLp-eZHf9H_an_08tqQJTbr {
        0% {
            -webkit-transform: translate(141.39999759197235px, 141.6250023841858px) rotate(0deg) translate(-141.39999759197235px, -141.6250023841858px);
            transform: translate(141.39999759197235px, 141.6250023841858px) rotate(0deg) translate(-141.39999759197235px, -141.6250023841858px);
        }

        33.33% {
            -webkit-transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
            transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
        }

        100% {
            -webkit-transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
            transform: translate(141.39999759197235px, 141.6250023841858px) rotate(360deg) translate(-141.39999759197235px, -141.6250023841858px);
        }
    }

    #el_33VhVOlhh * {
        -webkit-animation-duration: 3s;
        animation-duration: 3s;
        -webkit-animation-iteration-count: 1;
        animation-iteration-count: 1;
        -webkit-animation-play-state: running;
        animation-play-state: running;
        -webkit-animation-timing-function: cubic-bezier(0, 0, 1, 1);
        animation-timing-function: cubic-bezier(0, 0, 1, 1);
    }

    #el_zLp-eZHf9H {
        fill: #95C11F;
    }

    #el_33VhVOlhh:hover #el_zLp-eZHf9H {}

    #el_rscYgXSW76 {
        visibility: hidden;
    }

    #el_ELwiMJ6WZY {
        visibility: hidden;
    }

    #el_0KllcPOMi_ {
        visibility: hidden;
    }

    #el_srYemrCGoT {
        visibility: hidden;
    }

    #el_Rf8EvIwiTj {
        visibility: hidden;
    }

    #el_LBd_rRl8Bh {
        visibility: hidden;
    }

    #el_zLp-eZHf9H_an_08tqQJTbr {
        -webkit-animation-fill-mode: backwards;
        animation-fill-mode: backwards;
        -webkit-transform: translate(141.39999759197235px, 141.6250023841858px) rotate(0deg) translate(-141.39999759197235px, -141.6250023841858px);
        transform: translate(141.39999759197235px, 141.6250023841858px) rotate(0deg) translate(-141.39999759197235px, -141.6250023841858px);
        -webkit-animation-timing-function: cubic-bezier(0.42, 0, 0.58, 1);
        animation-timing-function: cubic-bezier(0.42, 0, 0.58, 1);
    }

    #el_33VhVOlhh:hover #el_zLp-eZHf9H_an_08tqQJTbr {
        -webkit-animation-name: kf_el_zLp-eZHf9H_an_08tqQJTbr;
        animation-name: kf_el_zLp-eZHf9H_an_08tqQJTbr;
    }
</style>
<g id="el_zLp-eZHf9H_an_08tqQJTbr" data-animator-group="true" data-animator-type="1">
    <path d="M141.41,1.31C64.04,1.31,1.09,64.25,1.09,141.62s62.95,140.32,140.31,140.32
    c77.37,0,140.31-62.95,140.31-140.32S218.78,1.31,141.41,1.31z M131.87,118.32c5.85,3.75,7.55,11.52,3.8,17.37
    c-2.4,3.75-6.46,5.79-10.6,5.79c-2.32,0-4.67-0.64-6.77-1.99l-39.43-25.27c-6.65-4.26-10.62-11.52-10.62-19.43
    c0-7.9,3.97-15.17,10.63-19.43L118.3,50.1c5.85-3.75,13.63-2.04,17.37,3.8c3.75,5.85,2.05,13.63-3.8,17.37L95.17,94.8L131.87,118.32
    z M204.75,203.85l-39.43,25.27c-2.1,1.35-4.45,1.99-6.77,1.99c-4.14,0-8.2-2.04-10.6-5.79c-3.75-5.85-2.05-13.63,3.8-17.37
    l36.7-23.52l-36.7-23.52c-5.85-3.75-7.55-11.52-3.8-17.37c3.74-5.85,11.53-7.55,17.37-3.8l39.43,25.27
    c6.65,4.26,10.62,11.53,10.62,19.43C215.37,192.32,211.4,199.59,204.75,203.85z"
        id="el_zLp-eZHf9H"></path>
</g>
</svg>

            </a>
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="/docs/getting-started">Docs</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/features">Features</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/enterprise">Enterprise</a>
                </li>
            </ul>
        </nav>
    </header>
    <main>


<div id="docs-page">
    <aside id="main-nav">
        <a class="navbutton right" id="hide-menu-button">
            <i class="fas fa-times"></i>
        </a>
        <nav>
            
            
            <section class="section-navigation">
    <div class="search-field" style="display: none">
        <input type="text" class="search-field--input" />
        <i class="fas fa-search search-field--icon"></i>
    </div>
    
    
    
    <ul>
        
            
<li class="no-chevron">
    <i class="chevron">&nbsp;</i>
    <a href="/docs/getting-started/" class="">
            Getting started
    </a>
    
    
    
    <ul>
        
    </ul>

</li>

        
            
<li class="no-chevron">
    <i class="chevron">&nbsp;</i>
    <a href="/docs/100_writing-tests/" class="">
            Writing Tests
    </a>
    
    
    
    <ul>
        
            
<li class="no-chevron">
    <i class="chevron">&nbsp;</i>
    <a href="/docs/100_writing-tests/000_anatomy-project/" class="">
            Anatomy of a Project
    </a>
    
    
    
    <ul>
        
    </ul>

</li>

        
            
<li class="no-chevron">
    <i class="chevron">&nbsp;</i>
    <a href="/docs/100_writing-tests/100_native-testing/110_interacting-with-env/" class=" active ">
            Interacting with the environment
    </a>
    
    
    
    <ul>
        
    </ul>

</li>

        
            
<li class="no-chevron">
    <i class="chevron">&nbsp;</i>
    <a href="/docs/100_writing-tests/100_native-testing/100_screenshot-based/" class="">
            Screenshot based Testing
    </a>
    
    
    
    <ul>
        
    </ul>

</li>

        
            
<li class="no-chevron">
    <i class="chevron">&nbsp;</i>
    <a href="/docs/100_writing-tests/000_web-testing/" class="">
            Web tests
    </a>
    
    
    
    <ul>
        
    </ul>

</li>

        
    </ul>

</li>

        
            
<li class="no-chevron">
    <i class="chevron">&nbsp;</i>
    <a href="/docs/enterprise/" class="">
            Enterprise Features
    </a>
    
    
    
    <ul>
        
            
<li class="no-chevron">
    <i class="chevron">&nbsp;</i>
    <a href="/docs/enterprise/icinga2-forwarder/" class="">
            Icinga2 Forwarder
    </a>
    
    
    
    <ul>
        
    </ul>

</li>

        
            
<li class="no-chevron">
    <i class="chevron">&nbsp;</i>
    <a href="/docs/enterprise/check_mk-forwarder/" class="">
            Check_MK Forwarder
    </a>
    
    
    
    <ul>
        
    </ul>

</li>

        
            
<li class="no-chevron">
    <i class="chevron">&nbsp;</i>
    <a href="/docs/enterprise/omd-forwarder/" class="">
            OMD / Gearman Forwarder
    </a>
    
    
    
    <ul>
        
    </ul>

</li>

        
            
<li class="no-chevron">
    <i class="chevron">&nbsp;</i>
    <a href="/docs/enterprise/test-container/" class="">
            E2E Test Container
    </a>
    
    
    
    <ul>
        
    </ul>

</li>

        
    </ul>

</li>

        
    </ul>

</section>



            <section class="section-navigation">
                <strong>API Docs</strong>
                <ul>
                    <li>
                        <a href="/apidoc/sakuli-legacy" target="_blank" rel="noopener">@sakuli/legacy</a>
                    </li>
                    <li>

                        <a href="/apidoc/sakuli-core" target="_blank" rel="noopener">
                            @sakuli/core
                        </a>
                    </li>
                    <li>
                        <a href="/apidoc/sakuli-cli" target="_blank" rel="noopener">
                            @sakuli/cli
                        </a>
                    </li>
                    <li>
                        <a href="/apidoc/sakuli-commons" target="_blank" rel="noopener">
                            @sakuli/commons
                        </a>
                    </li>
                    <li>
                        <a href="/apidoc/sakuli-rollup-hooks" target="_blank" rel="noopener">
                            @sakuli/rollup-hooks
                        </a>
                    </li>
                </ul>
            </section>
        </nav>
    </aside>
    <div class="page">
        <article class="shrink-content">
            <h1>Interacting with the environment</h1>
            

<p>In addition to screenshot-based test actions, Sakuli is capable of utilizing your keyboard, clipboard and environment variables.
All these features are incorporated in the <code>Environment</code> class.</p>

<h2 id="keyboard-actions">Keyboard actions</h2>

<p>The following snippet shows a possible use-case for native keyboard actions.
When initiating a download in Firefox, a native file download dialog opens.
To start the download, we need to accept the file dialog, something that is not possible within the capabilities of Selenium.
With Sakuli you get the opportunity to work around this problem, just like a real user would do.
We can accept the file dialog by simply pressing the <code>Enter</code> button.
Use Firefox as a browser for this test to work, as Chrome simply downloads the file without user interaction:</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript">(<span style="color:#a6e22e">async</span> () <span style="color:#f92672">=&gt;</span> {
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">testCase</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">TestCase</span>(<span style="color:#e6db74">&#34;test&#34;</span>);
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://nodejs.org/en/&#34;</span>;
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">env</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Environment</span>();
    <span style="color:#66d9ef">try</span> {
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_navigateTo</span>(<span style="color:#a6e22e">url</span>);
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_click</span>(<span style="color:#a6e22e">_link</span>(<span style="color:#e6db74">&#34;ABOUT&#34;</span>));
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_click</span>(<span style="color:#a6e22e">_link</span>(<span style="color:#e6db74">&#34;Releases&#34;</span>));
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_click</span>(<span style="color:#a6e22e">_link</span>(<span style="color:#e6db74">&#34;Dubnium&#34;</span>));
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_highlight</span>(<span style="color:#a6e22e">_link</span>(<span style="color:#e6db74">/node-v10.\d{1,}.\d{1,}.tar.gz/</span>));
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_click</span>(<span style="color:#a6e22e">_link</span>(<span style="color:#e6db74">/node-v10.\d{1,}.\d{1,}.tar.gz/</span>));
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">_wait</span>(<span style="color:#ae81ff">3000</span>); <span style="color:#75715e">//wait for browser pop-up to activate
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">keyDown</span>(<span style="color:#a6e22e">Key</span>.<span style="color:#a6e22e">ENTER</span>);
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">keyUp</span>(<span style="color:#a6e22e">Key</span>.<span style="color:#a6e22e">ENTER</span>);
    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
        <span style="color:#a6e22e">await</span> <span style="color:#a6e22e">testCase</span>.<span style="color:#a6e22e">handleException</span>(<span style="color:#a6e22e">e</span>);
    } <span style="color:#66d9ef">finally</span> {
        <span style="color:#a6e22e">testCase</span>.<span style="color:#a6e22e">saveResult</span>();
    }
})().<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">done</span>);</code></pre></td></tr></table>
</div>
</div>

<p>It is even possible to change the download location dynamically in some environments, by entering a new save path via:</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">type</span>(<span style="color:#e6db74">&#34;/new/path/to/file&#34;</span>);</code></pre></td></tr></table>
</div>
</div>

<h2 id="secrets">Secrets</h2>

<p>Many E2E tests require some kind of login.
While there is no problem in general, it still requires some mechanism to handle credentials.
Providing credentials via environment variable is a common practice, but it still is inconvenient when deploying the testcase to another system, since every single environment variable has to be migrated too.</p>

<p>Sakuli comes with a built-in mechanism to deal with sensitive data in testcases.
It uses a single masterkey, generated by Sakuli itself, to de- or encrypt secrets used in testcases.</p>

<p>Running</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#a6e22e">npx</span> <span style="color:#a6e22e">sakuli</span> <span style="color:#a6e22e">create</span> <span style="color:#a6e22e">masterkey</span></code></pre></td></tr></table>
</div>
</div>

<p>will generate a new masterkey, which should be exported as an environment variable <code>SAKULI_ENCRYPTION_KEY</code>.</p>

<p>Once the masterkey has been exported, secrets can be encrypted by running:</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#a6e22e">npx</span> <span style="color:#a6e22e">sakuli</span> <span style="color:#a6e22e">encrypt</span> <span style="color:#e6db74">&#34;super secret string&#34;</span></code></pre></td></tr></table>
</div>
</div>

<p>These encrypted secrets can now be stored safely inside your testfile. The <code>Environment</code> class provides methods to decrypt these secrets during test execution.</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">typeAndDecrypt</span>(<span style="color:#e6db74">&#34;$ENCRYPTED_SECRET&#34;</span>);
<span style="color:#75715e">// alternatively, via clipboard
</span><span style="color:#75715e"></span><span style="color:#a6e22e">await</span> <span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">pasteAndDecrypt</span>(<span style="color:#e6db74">&#34;$ENCRYPTED_SECRET&#34;</span>);</code></pre></td></tr></table>
</div>
</div>

        </article>
        <aside id="secondary-nav">
            <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#keyboard-actions">Keyboard actions</a></li>
<li><a href="#secrets">Secrets</a></li>
</ul></li>
</ul>
</nav>
        </aside>
    </div>
    <a class="navbutton left" href="#docs-page">
        <i class="fas fa-chevron-up"></i>
    </a>
    <a class="navbutton right" id="show-menu-button">
        <i class="fas fa-bars"></i>
    </a>
</div>



</main>
<footer>
    <nav>
        <ul>
            <li> © 2019 ConSol Consulting & Solutions Software GmbH</li>
            <li><a href="/legalnotice">Legal Notice</a></li>
            <li><a id="data-privacy-link" href="https://www.consol.com/data-privacy/" target="_blank" rel="noopener">Data Privacy</a></li>
            <li><a id="contact-link" href="https://www.consol.com/request-sakuli-enterprise" target="_blank" data-contactform="Contact our Team">Contact</a></li>
        </ul>
    </nav>
</footer>
<div id="modal"></div>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="/vue/index.js"></script>
</body>
</html>
